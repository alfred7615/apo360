oot@srv1170282:/var/www/apo360.net#
root@srv1170282:/var/www/apo360.net# sudo -u postgres psql -d apo360_prod -c "\dt"

[2]+  Stopped                 sudo -u postgres psql -d apo360_prod -c "\dt"

[2]+  Stopped                 sudo -u postgres psql -d apo360_prod -c "\dt"
root@srv1170282:/var/www/apo360.net#
root@srv1170282:/var/www/apo360.net#
root@srv1170282:/var/www/apo360.net#
root@srv1170282:/var/www/apo360.net#
root@srv1170282:/var/www/apo360.net#
root@srv1170282:/var/www/apo360.net#
root@srv1170282:/var/www/apo360.net#
root@srv1170282:/var/www/apo360.net#
root@srv1170282:/var/www/apo360.net#
root@srv1170282:/var/www/apo360.net#
root@srv1170282:/var/www/apo360.net# sudo -u postgres psql -d apo360_prod -c "INSERT INTO users (id, email, password_hash, first_name, rol, estado) VALUES ('admin_001', 'aapomayta15@gmail.com', 'Admin123', 'Admin', 'super_admin', 'activo') ON CONFLICT (email) DO UPDATE SET password_hash = 'Admin123', rol = 'super_admin';"
ERROR:  there is no unique or exclusion constraint matching the ON CONFLICT specification
root@srv1170282:/var/www/apo360.net# pm2 delete apo360
[PM2] Applying action deleteProcessId on app [apo360](ids: [ 0 ])
[PM2] [apo360](0) âœ“
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name               â”‚ mode     â”‚ â†º    â”‚ status    â”‚ cpu      â”‚ memory   â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
root@srv1170282:/var/www/apo360.net# cd /var/www/apo360.net && pm2 start ecosystem.config.cjs
[dotenv@17.2.3] injecting env (22) from .env -- tip: ğŸ” prevent building .env in docker: https://dotenvx.com/prebuild
[PM2][WARN] Applications apo360 not running, starting...
[PM2] App [apo360] launched (1 instances)
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name               â”‚ mode     â”‚ â†º    â”‚ status    â”‚ cpu      â”‚ memory   â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ apo360             â”‚ cluster  â”‚ 0    â”‚ online    â”‚ 0%       â”‚ 40.1mb   â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
root@srv1170282:/var/www/apo360.net# pm2 logs apo360 --lines 15
[TAILING] Tailing last 15 lines for [apo360] process (change the value with --lines option)
/var/www/apo360.net/logs/error-0.log last 15 lines:
0|apo360   |     at __init (file:///var/www/apo360.net/dist/index.js:10:56)
0|apo360   |     at server/storage.ts (file:///var/www/apo360.net/dist/index.js:1225:5)
0|apo360   |     at __init (file:///var/www/apo360.net/dist/index.js:10:56)
0|apo360   |     at file:///var/www/apo360.net/dist/index.js:3932:1
0|apo360   |     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
0|apo360   |     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
0|apo360   | You have triggered an unhandledRejection, you may have forgotten to catch a Promise rejection:
0|apo360   | Error: DATABASE_URL debe estar configurada. Â¿Olvidaste crear la base de datos?
0|apo360   |     at server/db.ts (file:///var/www/apo360.net/dist/index.js:1187:13)
0|apo360   |     at __init (file:///var/www/apo360.net/dist/index.js:10:56)
0|apo360   |     at server/storage.ts (file:///var/www/apo360.net/dist/index.js:1225:5)
0|apo360   |     at __init (file:///var/www/apo360.net/dist/index.js:10:56)
0|apo360   |     at file:///var/www/apo360.net/dist/index.js:3932:1
0|apo360   |     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
0|apo360   |     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)

/var/www/apo360.net/logs/output-0.log last 15 lines:
0|apo360   | 2025-12-10T04:09:53: âœ… Google OAuth configurado correctamente
0|apo360   | 2025-12-10T04:09:53: ğŸš€ Servidor WebSocket configurado en /ws
0|apo360   | 2025-12-10T04:09:53: 4:09:53 AM [express] ğŸ”„ Verificando migraciÃ³n de miembros_grupo...
0|apo360   | 2025-12-10T04:09:53: 4:09:53 AM [express] âœ… Tabla miembros_grupo ya estÃ¡ sincronizada
0|apo360   | 2025-12-10T04:09:53: 4:09:53 AM [express] serving on port 5000
0|apo360   | 2025-12-10T04:13:54: ğŸ—„ï¸ Usando PostgreSQL local (producciÃ³n)
0|apo360   | 2025-12-10T04:13:54: ğŸ” Modo de autenticaciÃ³n solicitado: basic
0|apo360   | 2025-12-10T04:13:54: ğŸ” Configurando autenticaciÃ³n bÃ¡sica (email/contraseÃ±a)...
0|apo360   | 2025-12-10T04:13:54: âœ… AutenticaciÃ³n bÃ¡sica configurada
0|apo360   | 2025-12-10T04:13:54:    ğŸ“§ Login: POST /api/auth/login
0|apo360   | 2025-12-10T04:13:54:    ğŸ“ Registro: POST /api/auth/register
0|apo360   | 2025-12-10T04:13:54: ğŸš€ Servidor WebSocket configurado en /ws
0|apo360   | 2025-12-10T04:13:54: 4:13:54 AM [express] ğŸ”„ Verificando migraciÃ³n de miembros_grupo...
0|apo360   | 2025-12-10T04:13:54: 4:13:54 AM [express] âœ… Tabla miembros_grupo ya estÃ¡ sincronizada
0|apo360   | 2025-12-10T04:13:54: 4:13:54 AM [express] serving on port 5000
