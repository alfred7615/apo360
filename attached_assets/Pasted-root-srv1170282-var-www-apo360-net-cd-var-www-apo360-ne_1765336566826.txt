root@srv1170282:/var/www/apo360.net# cd /var/www/apo360.net
root@srv1170282:/var/www/apo360.net# git pull origin main
estart apo360 --update-env
pm2 logs apo360 --lines 15From https://github.com/alfred7615/apo360
 * branch            main       -> FETCH_HEAD
Updating 0837108..5c87ad5
error: Your local changes to the following files would be overwritten by merge:
        package-lock.json
        package.json
Please commit your changes or stash them before you merge.
Aborting
root@srv1170282:/var/www/apo360.net# npm install

up to date, audited 544 packages in 2s

71 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (3 low, 5 moderate, 1 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
root@srv1170282:/var/www/apo360.net# pm2 restart apo360 --update-env
[PM2] Applying action restartProcessId on app [apo360](ids: [ 0 ])
[PM2] [apo360](0) âœ“
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name               â”‚ mode     â”‚ â†º    â”‚ status    â”‚ cpu      â”‚ memory   â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ apo360             â”‚ cluster  â”‚ 14   â”‚ online    â”‚ 0%       â”‚ 40.5mb   â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
root@srv1170282:/var/www/apo360.net# pm2 logs apo360 --lines 15
[TAILING] Tailing last 15 lines for [apo360] process (change the value with --lines option)
/var/www/apo360.net/logs/error-0.log last 15 lines:
0|apo360   |       ext_key_usage: [Array],
0|apo360   |       serialNumber: '05483C2167DDE70A63FE286827F3D56D52E5',
0|apo360   |       raw: <Buffer 30 82 03 94 30 82 03 19 a0 03 02 01 02 02 12 05 48 3c 21 67 dd e7 0a 63 fe 28 68 27 f3 d5 6d 52 e5 30 0a 06 08 2a 86 48 ce 3d 04 03 03 30 32 31 0b 30 ... 870 more bytes>,
0|apo360   |       issuerCertificate: [Object]
0|apo360   |     }
0|apo360   |   },
0|apo360   |   [Symbol(kMessage)]: "Hostname/IP does not match certificate's altnames: IP: 127.0.0.1 is not in the cert's list: "
0|apo360   | }
0|apo360   | 2025-12-10T03:13:48: Error: Hostname/IP does not match certificate's altnames: IP: 127.0.0.1 is not in the cert's list:
0|apo360   |     at file:///var/www/apo360.net/node_modules/@neondatabase/serverless/index.mjs:1345:74
0|apo360   |     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
0|apo360   |     at async NeonPreparedQuery.execute (file:///var/www/apo360.net/node_modules/drizzle-orm/neon-serverless/session.js:76:20)
0|apo360   |     at async DatabaseStorage.upsertUsuario (file:///var/www/apo360.net/dist/index.js:1224:53)
0|apo360   |     at async upsertUser (file:///var/www/apo360.net/dist/index.js:3191:3)
0|apo360   |     at async Strategy._verify (file:///var/www/apo360.net/dist/index.js:3304:9)

/var/www/apo360.net/logs/output-0.log last 15 lines:
0|apo360   | 2025-12-10T03:13:36: 3:13:36 AM [express] GET /api/configuracion/franja_emergencia 500 in 94ms :: {"message":"Error al obâ€¦
0|apo360   | 2025-12-10T03:13:36: 3:13:36 AM [express] GET /api/estadisticas/publicas 500 in 121ms :: {"message":"Error al obtener estâ€¦
0|apo360   | 2025-12-10T03:13:36: 3:13:36 AM [express] GET /api/servicios 500 in 139ms :: {"message":"Error al obtener servicios"}
0|apo360   | 2025-12-10T03:13:41: 3:13:41 AM [express] GET /api/configuracion/franja_emergencia 500 in 13ms :: {"message":"Error al obâ€¦
0|apo360   | 2025-12-10T03:13:41: 3:13:41 AM [express] GET /api/configuracion/roles 500 in 18ms :: {"message":"Error al obtener configâ€¦
0|apo360   | 2025-12-10T03:13:43: 3:13:43 AM [express] POST /api/auth/login 500 in 12ms :: {"message":"Hostname/IP does not match certâ€¦
0|apo360   | 2025-12-10T03:13:46: 3:13:46 AM [express] POST /api/auth/login 500 in 10ms :: {"message":"Hostname/IP does not match certâ€¦
0|apo360   | 2025-12-10T03:13:47: 3:13:47 AM [express] GET /api/login 302 in 3ms
0|apo360   | 2025-12-10T03:13:48: 3:13:48 AM [express] GET /api/callback 500 in 454ms :: {"message":"Hostname/IP does not match certifâ€¦
0|apo360   | 2025-12-10T03:16:27: ğŸ” Modo de autenticaciÃ³n solicitado: google
0|apo360   | 2025-12-10T03:16:27: âœ… Google OAuth configurado correctamente
0|apo360   | 2025-12-10T03:16:27: ğŸš€ Servidor WebSocket configurado en /ws
0|apo360   | 2025-12-10T03:16:27: 3:16:27 AM [express] ğŸ”„ Verificando migraciÃ³n de miembros_grupo...
0|apo360   | 2025-12-10T03:16:27: 3:16:27 AM [express] âš ï¸ Error en migraciÃ³n automÃ¡tica (se ignorarÃ¡): [object Object]
0|apo360   | 2025-12-10T03:16:27: 3:16:27 AM [express] serving on port 5000

